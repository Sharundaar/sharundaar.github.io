<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="/theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="/theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="google-site-verification" content="aPh1Z9SmJnMXvicC_q1nEUrpRYuhDEhxV2A5kdSl8NE" />        <meta name="author" content="Sharundaar" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content=", Articles, " />

<meta property="og:title" content="Leveraging DearImGui in Unreal "/>
<meta property="og:url" content="/drafts/leveraging-dearimgui-in-unreal.html" />
<meta property="og:description" content="Demoing usage of DearImGui in Unreal for fun and profit" />
<meta property="og:site_name" content="Sharundaar&#39;s Blog" />
<meta property="og:article:author" content="Sharundaar" />
<meta property="og:article:published_time" content="2023-09-02T00:00:00-04:00" />
<meta name="twitter:title" content="Leveraging DearImGui in Unreal ">
<meta name="twitter:description" content="Demoing usage of DearImGui in Unreal for fun and profit">

        <title>Leveraging DearImGui in Unreal  ¬∑ Sharundaar&#39;s Blog
</title>



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/"><span class=site-name>Sharundaar's Blog</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       "/"
                                    >Home</a>
                                </li>
                                <li ><a href="/categories.html">Categories</a></li>
                                <li ><a href="/tags.html">Tags</a></li>
                                <li ><a href="/archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="/drafts/leveraging-dearimgui-in-unreal.html">
                Leveraging DearImGui in Unreal
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <style>
table thead:first-child tr:first-child th:first-child {
    width: 33%;
}

table tbody td:last-child {
    overflow-x: auto
}
</style>

<h1>Introduction</h1>
<p>If we discuss tooling, I'll invariably talk about DearImGui and how it should be an essential part of all developers tool belt. It's just the kind of lib that sets such a high standard of "it just works" that even if you don't have an immediate need, I think you should check it out. On top of that, as a UI engineer, it's a good introduction to the concept of Immediate Mode UI that has some great benefits of knowing about. </p>
<p>So ! What's the goal today ?</p>
<p><img alt="Default unreal projects showing some shapes, an ImGui menu bar shows some options, a window named Actor Debugger is seen in the middle showing informations about a selected Actor" class="center" src="/images/UnrealImGui/end-result.png"></p>
<p>We'll be building this small debugging tool that allows us to pick an actor in the scene with a line trace, and show some data about the Mesh components attached toi t. We'll also see how to add buttons that can call arbitrary code on those components. It took me about 30 minutes to build, and we'll see how little UI code we end up needing üòÅ</p>
<p>Let's walk through the process !</p>
<h1>Initial Setup</h1>
<p>First of all we need to understand that DearImGui is a completely independent library, it's meant to be plugged into any arbitrary game engine/rendering backend, and as such you can't just go on the <a href="https://github.com/ocornut/imgui">imgui github</a> and hope for it to work out of the box in Unreal. As such, in usual Unreal fashion, we want to find a plugin that already does the implementation for us !</p>
<p>Luckily there's a few, I've been using this one : <a href="https://github.com/segross/UnrealImGui">https://github.com/segross/UnrealImGui</a>, unfortunately it stopped support at Unreal 4.26, but if you look at the forks there's a lot of them that supports Unreal &gt;5.0 ! BenUI has one that should be up to date : <a href="https://github.com/benui-dev/UnrealImGui">https://github.com/benui/UnrealImGui</a></p>
<p>Clone the repo in your Plugins folder, then you'll need to go to your .uplugin and add the following under <code>"Plugins": [</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;Name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ImGui&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;Enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</code></pre></div>

<p>You'll also need to add a dependency in your <code>.build.cs</code> :</p>
<div class="highlight"><pre><span></span><code>PrivateDependencyModuleNames.Add(&quot;ImGui&quot;);
</code></pre></div>

<p>And now we're good to go !</p>
<p>Create a file named <code>DevGuiSubsystem.h</code> and paste the following inside :</p>
<div class="highlight"><pre><span></span><code><span class="n">UCLASS</span><span class="p">()</span>
<span class="k">class</span><span class="w"> </span><span class="nc">UDevGuiSubsystem</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">UGameInstanceSubsystem</span><span class="p">,</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">FTickableGameObject</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">GENERATED_BODY</span><span class="p">()</span>

<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// FTickableGameObject implementation Begin</span>
<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">UWorld</span><span class="o">*</span><span class="w"> </span><span class="n">GetTickableGameObjectWorld</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">GetWorld</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">Tick</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">DeltaTime</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="p">;</span>
<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">TStatId</span><span class="w"> </span><span class="nf">GetStatId</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="p">;</span>
<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">ETickableTickType</span><span class="w"> </span><span class="nf">GetTickableTickType</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">IsTemplate</span><span class="p">()</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">ETickableTickType</span><span class="o">::</span><span class="n">Never</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ETickableTickType</span><span class="o">::</span><span class="n">Always</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">IsTickableWhenPaused</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// FTickableGameObject implementation End</span>

<span class="w">    </span><span class="n">UFUNCTION</span><span class="p">(</span><span class="n">BlueprintCallable</span><span class="p">)</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">ToggleImGuiInput</span><span class="p">();</span>
<span class="p">};</span>
</code></pre></div>

<p>This gives us a very simple class that's going to have a function called every frame (<code>Tick</code>), and that's instantiated only once at runtime with a valid World (<code>GetTickableTickType</code> makes sure of that).</p>
<p>On the implementation side, create a <code>DevGuiSubsystem.cpp</code> file, and paste the following :</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;DevGuiSubsystem.h&quot;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;ImGuiModule.h&quot;</span>

<span class="n">UE_DISABLE_OPTIMIZATION</span>

<span class="kt">void</span><span class="w"> </span><span class="n">UDevGuiSubsystem</span><span class="o">::</span><span class="n">Tick</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">DeltaTime</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="n">TStatId</span><span class="w"> </span><span class="n">UDevGuiSubsystem</span><span class="o">::</span><span class="n">GetStatId</span><span class="p">()</span><span class="w"> </span><span class="k">const</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">RETURN_QUICK_DECLARE_CYCLE_STAT</span><span class="p">(</span><span class="n">UDevGuiSubsystem</span><span class="p">,</span><span class="w"> </span><span class="n">STATGROUP_Tickables</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="n">UDevGuiSubsystem</span><span class="o">::</span><span class="n">ToggleImGuiInput</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">FImGuiModule</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">GetProperties</span><span class="p">().</span><span class="n">ToggleInput</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">UE_ENABLE_OPTIMIZATION</span>
</code></pre></div>

<p>And we're good to go !</p>
<p>Our job now is to fill up that Tick function full of ImGui goodness üòä</p>
<h1>A Very Simple Window</h1>
<p>To start with, we'll be creating a simple window with a button that will print something, that will be our little Hello World to test that everything works properly üòÅ</p>
<p>Creating Windows with DearImGui is extremely simple (as is everything as we'll see):</p>
<div class="highlight"><pre><span></span><code><span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;My Little Window :)&quot;</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">End</span><span class="p">();</span>
</code></pre></div>

<p>Strap that to your Tick function, and press Play in Unreal, and you'll see... A very tiny window !</p>
<p><img alt="A very tiny imgui window" class="center" src="/images/UnrealImGui/the-little-window-that-could.png"></p>
<p>Without any more input on our part, DearImGui will instantiate new windows with enough size to display their content, since we don't have any content in our case, the window is very tiny ! Luckily default windows are rezisable, which makes this a good time to talk about interacting with the UI üòä</p>
<h1>Interacting with our Window</h1>
<p>If you picked the plugin above, it should automatically register the Unreal command <code>ImGui.ToggleInput</code>. This command make sure the cursor is shown, and that the inputs are routed to the ImGui context. Just type that in the game console and you should now have a cursor !</p>
<p>Alternatively it's also a good place to use our little <code>UFUNCTION</code> to bind it to some keyboard shortcut. Since I'm just in a demo scene I'll be hardcoding the F10 key in my level blueprint (do NOT do this in production üò¨)</p>
<p><img alt="My demo level blueprint, showing an F10 node linked to the ToggleImGuiInput function call we created in the DevGui class" class="center" src="/images/UnrealImGui/level-blueprint.png"></p>
<p>If everything went well, you should now be able to drag the bottom right corner of our window and resize it, showing the title and deep emptyness in all its glory !</p>
<p><img alt="Our tiny window, showing it's non-content in all its glory" class="center" src="/images/UnrealImGui/the-big-window-that-can.png"></p>
<h1>Back to our Hello World</h1>
<p>We have a window, we don't have CONTENT, how to fix that ?</p>
<p>The way DearImGui work, you can add content to a window by making <code>ImGui::</code> calls in between those two <code>Begin/End</code> functions, the library will automatically take care of layouting your elements for you (vertically by default). The library comes with a lot of widgets, some would say an insane amount ! Luckily it's extremely well documented, and comes with an easily searchable and debuggable demo, we'll be opening it later to see. For now let's finish our Hello World.</p>
<p>The function we want to call is <code>void ImGui::Text(const char* fmt, ...);</code> ! It display a simple Text box with the content you want, it's written with the classical <code>fmt, ...</code> that you'll find in the <code>printf</code> family of functions, so we're right at home here ‚ò∫</p>
<p>You're code should look like this :</p>
<div class="highlight"><pre><span></span><code><span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;My Little Window :)&quot;</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Hello, world !&quot;</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">End</span><span class="p">();</span>
</code></pre></div>

<p>Aaaand, we're done ? üòÆ</p>
<p>With 3 simple lines of work, we have a full window, and a text block that can display any arbitrary text we want ? Dark magic I tell you.</p>
<p><img alt="Our window full of CONTENT" class="center" src="/images/UnrealImGui/successful-hello-world.png"></p>
<p>You want some proof we can just show any arbitrary thing ? Well just write this :</p>
<div class="highlight"><pre><span></span><code><span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;My Little Window :)&quot;</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Hello, world !&quot;</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;We&#39;re inside: %ls&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">GetName</span><span class="p">());</span>
<span class="n">FVector</span><span class="w"> </span><span class="n">CameraPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UGameplayStatics</span><span class="o">::</span><span class="n">GetPlayerCameraManager</span><span class="p">(</span><span class="n">GetWorld</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">GetCameraLocation</span><span class="p">();</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Camera Position: %.2f %.2f %.2f&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CameraPos</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">CameraPos</span><span class="p">.</span><span class="n">Y</span><span class="p">,</span><span class="w"> </span><span class="n">CameraPos</span><span class="p">.</span><span class="n">Z</span><span class="p">);</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">End</span><span class="p">();</span>
</code></pre></div>

<p>And here we go, very simple, very straightforward, perfect for immediate information üòä</p>
<p><img alt="Our window full of EVEN MORE CONTENT" class="center" src="/images/UnrealImGui/window-with-camera-position.png"></p>
<p>Alright ! At this point I think it's good to talk about the Demo !</p>
<h1>Bringing up the Demo</h1>
<p>ImGui comes with a full demo of all its features, very easy to search, very easy to copy code from. You'll find its code in <a href="https://github.com/ocornut/imgui/blob/master/imgui_demo.cpp">imgui_demo.cpp</a>, and to show it you just have to call <code>ImGui::ShowDemo( bOpenDemo )</code> ! What's that <code>bOpenDemo</code> you say ? Well it's part of a very common technique to easily spin up ImGui windows without too much fuss that relies on local static variables to persist states :)</p>
<p>A fundamental philosophy of ImGui is that you provide all the external parameters of a widget directly at the callsite, this allows us to construct fairly complex UIs with no setup code (we don't retain any information about the widget state), and as a result we need to do fairly little book keeping to make the widgets behave like we want.</p>
<p>Here the <code>ShowDemo</code> function is expecting a boolean (that it might modify, hence the ptr), that will tell it if it's open or not. We have to store this boolean on our side, you can do it any way you like (member variable, global variable, local static), but I'll show you a way that makes sense for quick prototypes.</p>
<p>Paste the following code outside of your hello world window (make sure you're before the <code>Begin</code>, or past the <code>End</code> !) :</p>
<div class="highlight"><pre><span></span><code><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bShowDemo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">bShowDemo</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ImGui</span><span class="o">::</span><span class="n">ShowDemo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bShowDemo</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>Now if you press play, you should see the Demo window show up :)</p>
<p><img alt="The beautiful ImGui Demo window" class="center" src="/images/UnrealImGui/imgui-demo.png"></p>
<p>Alright ! Play around with it, check all the beautiful and functional widgets available, compare the widget behavior with code in <a href="https://github.com/ocornut/imgui/blob/master/imgui_demo.cpp">imgui_demo.cpp</a> (search for strings you see in the UI !)</p>
<p>You'll see that, although the demo window is fairly complex, the actual DearImGui code is relatively simple :) That's one of the big advantages right here, spin up complex UI with relatively little code (try to make an equivalent window in Slate/UMG or any other UI package).</p>
<h2>Bonus Round</h2>
<p>Can you try to add a button to the Hello World window that will toggle the demo window ? Searching in imgui_demo for how to use specific widgets is a core part of using this library, so if you manage to do it by yourself at this point, you're good to go for any debugging tool you want !</p>
<p>You can jump to the answer here : <a href="#toggle-demo-window-code">Jump to answer</a></p>
<h1>ActorPicker with Fries</h1>
<p>Ok ! Let's get serious, at this point you should be familiarized with the ImGui library, but we haven't really dealt with Unreal itself. As you start using the lib you'll find some small pain points, mainly due to the usage of UTF16 in Unreal which makes it hard to just send FStrings to the usual calls. In this section we'll build a debugging window with a features that should cover a few things about those interactions, and how to set them up properly.</p>
<p>Let me remind you of the goal ! We'll be making a small window that allows us to pick an actor, show some data, and make a button to interact with that actor üòä</p>
<p><img alt="Image of the actor debugger we're going to build" class="center" src="/images/UnrealImGui/actor-debugger.png"></p>
<h2>The Picking</h2>
<p>First we want to show a window, with a button that allows us to enter a 'pick mode', while in this mode we'll throw line trace through the screen, and if we hit an actor we'll store it in a local variable so we can draw informations about it later !</p>
<p>Let's make the window, the button and some variables for book keeping :</p>
<div class="highlight"><pre><span></span><code><span class="k">static</span><span class="w"> </span><span class="n">TWeakObjectPtr</span><span class="o">&lt;</span><span class="n">AActor</span><span class="o">&gt;</span><span class="w"> </span><span class="n">PickedActor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bIsPickingActor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>

<span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;Actor Debugger&quot;</span><span class="p">);</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">ButtonTitle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bIsPickingActor</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;Stop Picking&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;Start Picking&quot;</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="n">ButtonTitle</span><span class="p">))</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">bIsPickingActor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">bIsPickingActor</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">ImGui</span><span class="o">::</span><span class="n">End</span><span class="p">();</span>
</code></pre></div>

<p>Simple enough ? We're making a window, adding a button, and swap the button title depending on <code>bIsPickingActor</code> ! If you worked with Slate here you would already have created 2 files and passed some variable around :)</p>
<p>From there, we want to fill up <code>PickedActor</code> ! Next part is only Unreal code (well.. almost, I left a surprise at the end) :</p>
<div class="highlight"><pre><span></span><code><span class="n">UWorld</span><span class="o">*</span><span class="w"> </span><span class="n">World</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GEngine</span><span class="o">-&gt;</span><span class="n">GetWorldFromContextObject</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="n">EGetWorldErrorMode</span><span class="o">::</span><span class="n">LogAndReturnNull</span><span class="p">);</span>
<span class="n">ULocalPlayer</span><span class="o">*</span><span class="w"> </span><span class="n">LP</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">World</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">World</span><span class="o">-&gt;</span><span class="n">GetFirstLocalPlayerFromController</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">bPickingActor</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">LP</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">LP</span><span class="o">-&gt;</span><span class="n">ViewportClient</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// get the projection data</span>
<span class="w">        </span><span class="n">FSceneViewProjectionData</span><span class="w"> </span><span class="n">ProjectionData</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">LP</span><span class="o">-&gt;</span><span class="n">GetProjectionData</span><span class="p">(</span><span class="n">LP</span><span class="o">-&gt;</span><span class="n">ViewportClient</span><span class="o">-&gt;</span><span class="n">Viewport</span><span class="p">,</span><span class="w"> </span><span class="n">ProjectionData</span><span class="p">))</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">ImVec2</span><span class="w"> </span><span class="n">ScreenPosImGui</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ImGui</span><span class="o">::</span><span class="n">GetMousePos</span><span class="p">();</span><span class="w"> </span><span class="c1">// &lt;-- Get the current mouse position !</span>
<span class="w">            </span><span class="n">FVector2D</span><span class="w"> </span><span class="n">ScreenPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">ScreenPosImGui</span><span class="p">.</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">ScreenPosImGui</span><span class="p">.</span><span class="n">y</span><span class="p">};</span>

<span class="w">            </span><span class="n">FMatrix</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">InvViewProjMatrix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProjectionData</span><span class="p">.</span><span class="n">ComputeViewProjectionMatrix</span><span class="p">().</span><span class="n">InverseFast</span><span class="p">();</span>

<span class="w">            </span><span class="n">FVector</span><span class="w"> </span><span class="n">WorldPosition</span><span class="p">,</span><span class="w"> </span><span class="n">WorldDirection</span><span class="p">;</span>
<span class="w">            </span><span class="n">FSceneView</span><span class="o">::</span><span class="n">DeprojectScreenToWorld</span><span class="p">(</span><span class="n">ScreenPos</span><span class="p">,</span><span class="w"> </span><span class="n">ProjectionData</span><span class="p">.</span><span class="n">GetConstrainedViewRect</span><span class="p">(),</span><span class="w"> </span><span class="n">InvViewProjMatrix</span><span class="p">,</span><span class="w"> </span><span class="n">WorldPosition</span><span class="p">,</span><span class="w"> </span><span class="n">WorldDirection</span><span class="p">);</span>

<span class="w">            </span><span class="n">FCollisionQueryParams</span><span class="w"> </span><span class="n">Params</span><span class="p">(</span><span class="s">&quot;DevGuiActorPickerTrace&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SCENE_QUERY_STAT_ONLY</span><span class="p">(</span><span class="n">UDevGuiSubsystem</span><span class="p">),</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>

<span class="w">            </span><span class="n">FCollisionObjectQueryParams</span><span class="w"> </span><span class="nf">ObjectParams</span><span class="p">(</span>
<span class="w">                    </span><span class="n">ECC_TO_BITFIELD</span><span class="p">(</span><span class="n">ECC_WorldStatic</span><span class="p">)</span>
<span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="n">ECC_TO_BITFIELD</span><span class="p">(</span><span class="n">ECC_WorldDynamic</span><span class="p">)</span>
<span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="n">ECC_TO_BITFIELD</span><span class="p">(</span><span class="n">ECC_Pawn</span><span class="p">)</span>
<span class="w">                    </span><span class="o">|</span><span class="w"> </span><span class="n">ECC_TO_BITFIELD</span><span class="p">(</span><span class="n">ECC_PhysicsBody</span><span class="p">)</span>
<span class="w">            </span><span class="p">);</span>

<span class="w">            </span><span class="n">PickedActor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w"> </span><span class="c1">// &lt;-- Reset the actor</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">FHitResult</span><span class="w"> </span><span class="n">OutHit</span><span class="p">;</span>
<span class="w">                </span><span class="n">World</span><span class="o">-&gt;</span><span class="n">LineTraceSingleByObjectType</span><span class="p">(</span><span class="w"> </span><span class="c1">// &lt;-- Actually doing the trace</span>
<span class="w">                    </span><span class="n">OutHit</span><span class="p">,</span>
<span class="w">                    </span><span class="n">WorldPosition</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">WorldDirection</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span>
<span class="w">                    </span><span class="n">WorldPosition</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">WorldDirection</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">10000.0</span><span class="p">,</span>
<span class="w">                    </span><span class="n">ObjectParams</span><span class="p">,</span>
<span class="w">                    </span><span class="n">Params</span><span class="p">))</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">PickedActor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OutHit</span><span class="p">.</span><span class="n">GetActor</span><span class="p">();</span><span class="w"> </span><span class="c1">// &lt;-- Set on hit !</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Exiting Actor Picking mode if we click the Left button !</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">IsMouseClicked</span><span class="p">(</span><span class="n">ImGuiMouseButton_Left</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">bPickingActor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>That's a big code splat üòä But take your time, read through it, at the end of the day there's no UI code in there, only standard unreal line tracing rituals. Right at the end you can see that we're exiting actor picking mode in a very straightforward way, we just ask ImGui if the left button is clicked, and we're setting our boolean to false ! All the mouse state tracking is done in ImGui's backend.</p>
<p>Ok ! You can put a breakpoint at the <code>PickedActor =</code> line to check if you're actually hitting something ! But we have a UI toolset, why not just display it ?</p>
<h2>The Showing</h2>
<p>Let's start simple, let's just show the actor's name :)</p>
<div class="highlight"><pre><span></span><code><span class="cm">/* {...} our picking code here */</span>

<span class="k">if</span><span class="p">(</span><span class="n">AActor</span><span class="o">*</span><span class="w"> </span><span class="n">Actor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PickedActor</span><span class="p">.</span><span class="n">Get</span><span class="p">())</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Picked actor: %ls&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">Actor</span><span class="o">-&gt;</span><span class="n">GetName</span><span class="p">());</span>
<span class="p">}</span>
</code></pre></div>

<p><img alt="We picked a Table" class="center" src="/images/UnrealImGui/picked-table.png"></p>
<p>It doesn't look like much ! But we've got the basis of a very powerful tool right there ! We now have full access to any arbitrary AActor pointers in the scene, we can make some UI to display and change any properties, show component information, and if you're feeling courageous, even mirror any actor changes to the default class üòä</p>
<p>But let's continue with the plan. Now  we want to list the attached static mesh component, show some information about them, and if we have physics enable, add a button to create a push force to interact live with the scene !</p>
<p>To list all attached component we'll be using the <code>ForEachComponent</code> function :</p>
<div class="highlight"><pre><span></span><code><span class="n">Actor</span><span class="o">-&gt;</span><span class="n">ForEachComponent</span><span class="o">&lt;</span><span class="n">UStaticMeshComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="p">[](</span><span class="n">UStaticMeshComponent</span><span class="o">*</span><span class="w"> </span><span class="n">Mesh</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Our ImGui code here</span>
<span class="p">});</span>
</code></pre></div>

<p>The ImGui widgets we'll need are <code>ImGui::CollapsingHeader</code>, <code>ImGui::Button</code>, <code>ImGui::Text</code>. We'll also need to use 2 helpers for a reason I'll explain later : <code>ImGui::PushID</code>, and <code>ImGui::PopID</code>.</p>
<p>Let's do it.</p>
<p>We'll want to display the component name in the collapsing header, to do so we'll use <code>Mesh-&gt;GetName()</code>, sadly you'll notice that this function returns an FString which, at least on windows, Unreal encodes as a UTF16 string. Meaning you'll get some 16 bits <code>TCHAR*</code> instead of the standard 8 bits <code>char*</code> that ImGui expects. Luckily there's a straightforward conversion scheme that allows us to go from one to the other :)  </p>
<div class="highlight"><pre><span></span><code><span class="c1">// This is you plan to reuse the name</span>
<span class="k">auto</span><span class="w"> </span><span class="n">NameANSI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StringCast</span><span class="o">&lt;</span><span class="n">ANSICHAR</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">GetName</span><span class="p">());</span>
<span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NameANSI</span><span class="p">.</span><span class="n">Get</span><span class="p">();</span>

<span class="c1">// This if you&#39;re just doing it once (yes, it is a mouthful)</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">CollapsingHeader</span><span class="p">(</span><span class="n">StringCast</span><span class="o">&lt;</span><span class="n">ANSICHAR</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">GetName</span><span class="p">()).</span><span class="n">Get</span><span class="p">());</span>
</code></pre></div>

<p>Perfect ! We can easily convert <code>FString</code> to the needed <code>const char*</code>. We can now setup our header and add some content ! Let's show the mesh name and if it's Nanite enabled for funsies.</p>
<div class="highlight"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">NameANSI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StringCast</span><span class="o">&lt;</span><span class="n">ANSICHAR</span><span class="o">&gt;</span><span class="p">(</span><span class="o">*</span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">GetName</span><span class="p">());</span>
<span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">CollapsingHeader</span><span class="p">(</span><span class="n">NameANSI</span><span class="p">.</span><span class="n">Get</span><span class="p">(),</span><span class="w"> </span><span class="n">ImGuiTreeNodeFlags_DefaultOpen</span><span class="p">))</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">StaticMesh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">GetStaticMesh</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Mesh name: %ls&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">StaticMesh</span><span class="o">-&gt;</span><span class="n">GetName</span><span class="p">());</span>
<span class="w">        </span><span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Nanite Enabled: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">StaticMesh</span><span class="o">-&gt;</span><span class="n">NaniteSettings</span><span class="p">.</span><span class="n">bEnabled</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Note that I'm using the <code>%ls</code> modifier to print <code>TCHAR*</code> and <code>%s</code> for <code>char*</code>.</p>
<p>Simple enough !</p>
<p>Alright last part, we'll want to add a button, that when clicked send a force to the static mesh to make it jump. To test this out I made a simple Actor with 3 static meshes set as Movable and with gravity enabled. We'll want to call the <code>AddForce</code> function on them to make them jump.</p>
<p>With that added in our scene, we just need the following code !</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="p">(</span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">IsSimulatingPhysics</span><span class="p">())</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="s">&quot;Add Vertical Force&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">AddForce</span><span class="p">(</span><span class="n">FVector</span><span class="p">{</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">50000.0</span><span class="p">},</span><span class="w"> </span><span class="n">NAME_None</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>And we're done ! We now have a simple interface, that loops over the static mesh components of the actor we line traced, displays some arbitrary information, and on top of that we have a very simple interactive element to trigger effects on that Actor !</p>
<p><img alt="The actor debugger with a new 'Add Vertical Force' button" class="center" src="/images/UnrealImGui/add-vertical-force-button.png"></p>
<p>Yay ! If you click the first button it should work perfectly, but if you click the other ones... You might find them broken üò¨ Why is that ?</p>
<h2>DearImGui IDs shenanigans</h2>
<p>So here we need to dig a <em>tiny</em> bit into how DearImGui works behind. When you generate widgets, especially ones with frame-over-frame interactions (like a button answering a click), ImGui stores temporal states about widgets in a table, think stuff like "has the user started a click on this button", "is this list element selected", any info that can't be immediately deduced from the current frame state. For ImGui to track that data between each frame, it tries to generate a unique ID per widget from infos available at the call site. In the case of a button (and in fact everything in DearImGui), you're passing a string that labels the item ! So DearImGui yonks that, hashes it as a 64 bits ID, and use that as a key.</p>
<p>If it were only doing that though, you would quickly be annoyed as you'd build other views with buttons with the same name and them not working... To solve this ImGui also rehash that 64 bits ID with an ID stack, each window has it's own stack, and various widgets push and pops from this stack. So in our case, our buttons are all generated with the same ID stack and the same label, so their IDs ends up the same ! To solve this we can either change the label, or modify the ID stack so when the widget key is generated, it's unique.</p>
<p>Here's both solutions in action in an Unreal pedantic way:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Modify the ID Stack with our little category name</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">PushID</span><span class="p">(</span><span class="n">NameANSI</span><span class="p">.</span><span class="n">Get</span><span class="p">());</span>
<span class="k">if</span><span class="p">(</span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">IsSimulatingPhysics</span><span class="p">())</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="s">&quot;Add Vertical Force&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">AddForce</span><span class="p">(</span><span class="n">FVector</span><span class="p">{</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">50000.0</span><span class="p">},</span><span class="w"> </span><span class="n">NAME_None</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="n">ImGui</span><span class="o">::</span><span class="n">PopID</span><span class="p">();</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">// Change the button label, anything after ## isn&#39;t displayed so we can use that for ID unicity</span>
<span class="k">if</span><span class="p">(</span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">IsSimulatingPhysics</span><span class="p">())</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">FString</span><span class="w"> </span><span class="n">ButtonLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FString</span><span class="o">::</span><span class="n">Printf</span><span class="p">(</span><span class="n">TEXT</span><span class="p">(</span><span class="s">&quot;Add Vertical Force##%s&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">NameANSI</span><span class="p">.</span><span class="n">Get</span><span class="p">());</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="n">TCHAR_TO_UTF8</span><span class="p">(</span><span class="o">*</span><span class="n">ButtonLabel</span><span class="p">)))</span><span class="w"> </span><span class="c1">// TCHAR_TO_UTF8 is equivalent to StringCast we did before</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Mesh</span><span class="o">-&gt;</span><span class="n">AddForce</span><span class="p">(</span><span class="n">FVector</span><span class="p">{</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">50000.0</span><span class="p">},</span><span class="w"> </span><span class="n">NAME_None</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>Which method you prefer will depend on your specific context, but they're both good to know about üòÑ</p>
<p>And we're done ! With this we have a nice debugging UI that allows us to pick arbitrary actors in a scene and display any information we want. There's a lot more we can do but this is just a simple demo of what's possible.</p>
<h1>The Cherry on Top</h1>
<p>We have a debugger, the demo window, a little hello world. As you start developing more tools you might wonder: How to organize everything ? Enter the Main Menu Bar.</p>
<p>It's a simple tool bar DearImGui proposes that shows at the top of the screen. You can push buttons, text, sub-menus... anything really, to that menu bar. So let's set that up !</p>
<p>At the end of your Tick function, write the following :</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Only show the bars if we have ImGui inputs enabled</span>
<span class="k">if</span><span class="p">(</span><span class="n">FImGuiModule</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">GetProperties</span><span class="p">().</span><span class="n">IsInputEnabled</span><span class="p">())</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">BeginMainMenuBar</span><span class="p">())</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Website Support&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">BeginMenu</span><span class="p">(</span><span class="s">&quot;Actor Debugger&quot;</span><span class="p">))</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">MenuItem</span><span class="p">(</span><span class="s">&quot;Toggle Actor Debugger&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">bActorDebuggerOpened</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">bActorDebuggerOpened</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="n">ImGui</span><span class="o">::</span><span class="n">EndMenu</span><span class="p">();</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">ImGui</span><span class="o">::</span><span class="n">EndMainMenuBar</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">BeginMainMenuBar</span><span class="p">())</span><span class="w"> </span><span class="c1">// BeginMainMenuBar calls actually appends to the menu ! So you set it up in multiple chunks</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">BeginMenu</span><span class="p">(</span><span class="s">&quot;ImGui Misc&quot;</span><span class="p">))</span><span class="w"> </span><span class="c1">// Creating a sub-menu</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">MenuItem</span><span class="p">(</span><span class="s">&quot;Toggle Demo&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">bShowDemo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">bShowDemo</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">ImGui</span><span class="o">::</span><span class="n">EndMenu</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">ImGui</span><span class="o">::</span><span class="n">EndMainMenuBar</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>And if you enable ImGui's inputs it should show more or less like this :</p>
<p><img alt="The magnificient main menu bar, with sub menus !" class="center" src="/images/UnrealImGui/main-menu-bar.png"></p>
<p>I'm leaving the toggle hello world window as en exercise to the reader üòä</p>
<h1>Conclusion</h1>
<p>Hopefully you can see how easy and quick we can now develop visualization and debugging tool ! In everything we've written the actual UI code comprised very little, and that's one of the biggest strength of DearImGui, it doesn't get in the way ! From there don't hesitate to just read <a href="https://github.com/ocornut/imgui/blob/master/imgui.h">imgui.h</a> and spend time getting familiar with the imgui demo. You'll find a lot of interesting and useful widgets are available üòä</p>
<p>You can find the complete code we've written here : </p>
<ul>
<li><a href="/code/DevGuiSubsystem.cpp">Implementation</a></li>
<li><a href="/code/DevGuiSubsystem.h">Header</a></li>
</ul>
<h1>Annexe</h1>
<h2>DearImGui or ImGui</h2>
<p>In this article, I've <em>tried</em> to refer to the lib as DearImGui most of the time. If you look online, the term ImGui kinda became ubiquitous with this lib (for good reasons), but ImGui actually refers to Immediate GUI, which is a UI API paradigm opposed to Retained UI.</p>
<p>Retained UI would be your more standard UI library, like UMG/Slate, Windows Form, Qt. The main characteristic is that the UI data book keeping responsability is put in the hand of the user of the library. You have to instantiate stuff (with SNew calls, or NewObject), keep pointers around, check internal states for response...  This generally results in very bloated code to describe a UI presentation, and a lot of caching issues.</p>
<p>Opposed to that, Immediate UI posits that you should just be able to describe the UI layout and widgets as a part of the program, and the backend should take care of all the state retention. (<a href="https://github.com/ocornut/imgui/wiki/About-the-IMGUI-paradigm">read this for more information</a>)</p>
<p>Now DearImGui as a library embodies those concepts ! But there's other libs that are worth taking a look :
 - <a href="https://github.com/vurtun/nuklear">Nuklear</a>
 - <a href="https://github.com/rxi/microui">microui</a></p>
<p>There's also ways to write retained UI in an immediate mode kind of API, I think it's important to understand the core concepts to simplify how we might write UI backend code in the future !</p>
<p><tag id="toggle-demo-window-code"></tag></p>
<h2>Toggle Demo window code</h2>
<p>Here's the full <code>Tick</code> function that will add a simple button that we can click to toggle the demo window on/off :</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">UDevGuiSubsystem::Tick</span><span class="p">(</span><span class="kt">float</span><span class="w"> </span><span class="n">DeltaTime</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">bShowDemo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>

<span class="w">    </span><span class="n">ImGui</span><span class="o">::</span><span class="n">Begin</span><span class="p">(</span><span class="s">&quot;My Little Window :)&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Hello, world !&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;We&#39;re inside: %ls&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">GetName</span><span class="p">());</span>
<span class="w">    </span><span class="n">FVector</span><span class="w"> </span><span class="n">CameraPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UGameplayStatics</span><span class="o">::</span><span class="n">GetPlayerCameraManager</span><span class="p">(</span><span class="n">GetWorld</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">GetCameraLocation</span><span class="p">();</span>
<span class="w">    </span><span class="n">ImGui</span><span class="o">::</span><span class="n">Text</span><span class="p">(</span><span class="s">&quot;Camera Position: %.2f %.2f %.2f&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">CameraPos</span><span class="p">.</span><span class="n">X</span><span class="p">,</span><span class="w"> </span><span class="n">CameraPos</span><span class="p">.</span><span class="n">Y</span><span class="p">,</span><span class="w"> </span><span class="n">CameraPos</span><span class="p">.</span><span class="n">Z</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">ImGui</span><span class="o">::</span><span class="n">Button</span><span class="p">(</span><span class="s">&quot;Toggle Demo&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">bShowDemo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">bShowDemo</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">ImGui</span><span class="o">::</span><span class="n">End</span><span class="p">();</span>

<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">bShowDemo</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">ImGui</span><span class="o">::</span><span class="n">ShowDemoWindow</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bShowDemo</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2023-09-02T00:00:00-04:00">Sat 02 September 2023</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#articles-ref">Articles</a>
<h4>Contact</h4>
<div id="sidebar-social-link">
    <a href="https://twitter.com/Sharundaar" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Twitter" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1da1f3"/><path fill="#fff" d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
    </a>
    <a href="https://github.com/Sharundaar" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://mastodon.gamedev.place/@Sharundaar" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Mastodon" role="img" viewBox="0 0 512 512" fill="#fff"><rect width="512" height="512" rx="15%"/><path d="m409 290c-5 24-43 50-85 56-86 11-137-6-137-6 3 13-4 54 70 52 31 0 58-7 58-7l2 27c-51 24-107 15-140 6-67-17-79-90-81-162v-59c0-74 49-96 49-96 50-24 180-22 222 0 0 0 49 22 49 96 0 0 1 55-7 93" fill="#3088d4"/><path d="m358 202v91h-35v-88c0-18-8-27-23-27-18 0-27 11-27 33v47h-34v-47c0-22-9-33-27-33-15 0-23 9-23 27v88h-35v-91c0-18 5-60 52-60 39 0 50 37 50 37s10-37 50-37c45 0 52 42 52 60"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="/theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>